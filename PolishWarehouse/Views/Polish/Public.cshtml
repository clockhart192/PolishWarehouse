@model PolishWarehouse.Models.PolishModel[]
@{
    ViewBag.Title = "Polish List";

    var polishTypes = ViewBag.PolishTypes;
}

@Html.Partial("MessageControl")

<div class="row">
    <div class="col-md-12">
        <div class="panel panel-default">
            <div class="panel-heading">
                <a data-toggle="collapse" href=""><h3>Polish List</h3></a>
            </div>
            <div class="panel-collapse" id="Polishcollapse">
                <div class="panel-body">
                    <div class="row">
                        <div class="col-md-12 table-responsive">
                            @*<input type="text" onkeyup="SortTable('salestable',this)" />*@
                            <table class="table table-hover table-condensed datatable" id="polishtable">
                                <thead>
                                    <tr>
                                        <th>Brand</th>
                                        <th>Name</th>
                                        <th>Description</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    @foreach (var polish in Model)
                                    {
                                        <tr>
                                            <td>@polish.BrandName</td>
                                            <td><a href="#" onclick="getDetailsModal('@polish.ID'); return false;">@polish.PolishName</a></td>
                                            <td>@polish.Description</td>
                                        </tr>
                                    }
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="Details" role="dialog">
    <div class="modal-dialog">
        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Details</h4>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-md-12">
                        <div class="panel panel-default">
                            <div class="panel-heading">
                                <h3>Polish Info</h3>
                            </div>
                            <div class="panel-body">
                                <div class="row">
                                    <div class="col-md-12">
                                        <div class="row">
                                            <div class="col-md-6">
                                                <label for="BrandID">Brand Name</label>
                                                <br />
                                                <input id="BrandName" name="BrandName" class="form-control" disabled placeholder="Brand Name">
                                            </div>
                                            <div class="col-md-6">
                                                <label for="PolishName">Polish Name*</label>
                                                <br />
                                                <input type="text" id="PolishName" name="PolishName" placeholder="Polish Name" class="form-control" disabled />
                                            </div>

                                        </div>
                                        <div class="row hidden">
                                            <div class="col-md-6">
                                                <label for="ColorID">Color</label>
                                                <br />
                                                <input id="ColorName" name="ColorName" class="form-control" disabled placeholder="Primary Color">
                                            </div>
                                            @*<div class="col-md-6">
                                                    <label for="PolishName">Color Number</label>
                                                    <br />
                                                    <input type="text" id="ColorNumber" name="ColorNumber" placeholder="Color Number" class="form-control" disabled />
                                                </div>*@
                                        </div>
                                        <div class="row">
                                            <div class="col-md-12">
                                                <label for="PolishName">Description</label>
                                                <br />
                                                <textarea class="form-control" disabled rows="5" id="Description" name="Description" placeholder="Description"></textarea>
                                            </div>
                                        </div>
                                        <div class="row hidden">
                                            <div class="col-md-6">
                                                <label for="SecondaryColorsIDs">Secondary Colors</label>
                                                <br />
                                                <select multiple id="SecondaryColorsIDs" name="SecondaryColorsIDs" class="form-control" disabled>
                                                    <option></option>

                                                </select>
                                            </div>
                                            <div class="col-md-6">
                                                <label for="GlitterColorsIDs">Glitter Colors</label>
                                                <br />
                                                <select multiple id="GlitterColorsIDs" name="GlitterColorsIDs" class="form-control" disabled>
                                                    <option></option>

                                                </select>
                                            </div>

                                        </div>
                                        <div class="row hidden">
                                            <div class="col-md-3">
                                                <label for="Coats">Coats</label>
                                                <br />
                                                <input type="number" id="Coats" name="Coats" placeholder="Coats" class="form-control" disabled />
                                            </div>
                                            <div class="col-md-3">
                                                <label for="Coats">Quantity</label>
                                                <br />
                                                <input type="number" id="Quantity" name="Quantity" placeholder="Quantity" class="form-control" disabled />
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        @*@if (!string.IsNullOrWhiteSpace(polish.SelfImage))
                                            {
                                                <img src="@polish.SelfImage" alt="self image via upload" class="img-polish-display" />
                                            }
                                            else if (!string.IsNullOrWhiteSpace(polish.SelfImageURL))
                                            {
                                                <img src="@polish.SelfImageURL" alt="self image via url" class="img-polish-display" />
                                            }
                                            else if (!string.IsNullOrWhiteSpace(polish.MakerImage))
                                            {
                                                <img src="@polish.MakerImage" alt="self image via upload" class="img-polish-display" />
                                            }
                                            else if (!string.IsNullOrWhiteSpace(polish.MakerImageURL))
                                            {
                                                <img src="@polish.MakerImageURL" alt="maker image via url" class="img-polish-display" />
                                            }
                                            else
                                            {
                                                <img src="~/Content/Images/default.png" class="img-polish-display" alt="default image" />
                                            }*@
                                    </div>
                                </div>

                            </div>
                        </div>
                        <div class="col-md-4 hidden">
                            <div class="panel panel-default">
                                <div class="panel-heading">
                                    <h3 class="panel-title">Polish Types</h3>
                                </div>
                                <div class="panel-body">
                                    <br />
                                    <div class="row">
                                        @foreach (var type in polishTypes)
                                        {
                                            <div class="col-sm-3">
                                                <span>@type.Name</span>
                                                <br />
                                                <label class="switch">
                                                    <input id="polish-type-@type.Name" type="checkbox">
                                                    <span class="slider round"></span>
                                                </label>
                                            </div>
                                        }
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">

                </div>
            </div>
        </div>
    </div>
</div>
<script>
            $(document).ready(function () {
                $('#polishtable').dataTable({
                    "pageLength": 100,
                    "deferLoading": true,
                    "lengthMenu": [[10, 25, 50, 100, 150, 200, -1], [10, 25, 50, 100, 150, 200, "All"]],
                });
            });

            function getDetailsModal(id) {
                var token = $('[name=__RequestVerificationToken]').val();
                var data = {
                    __RequestVerificationToken: token,
                    id: id
                };
                $.ajax({
                    url: "@Url.Action("DetailsAsync", "Polish")",
                    type: 'POST',
                data: data,
                success: function (response) {
                    $("#BrandName").val(response.BrandName);
                    $("#PolishName").val(response.PolishName);
                    $("#ColorName").val(response.ColorName);
                    $("#Description").val(response.Description);
                    //$("#AskingPrice").val(response.AskingPrice);
                    //$("#SellQty").val(response.SellQty);
                    //$("#DestashNotes").val(response.DestashNotes);

                    //for(var i=0;i<response.Types.Length;i++){
                    //    $('#polish-type-' + response.Types[i].Name).prop('checked', true);
                    //}

                    $("#Details").modal("show");
                },
                failure: function (response) {
                    alert(response);
                },
                error: function (response) {
                    alert(response);
                }
            });
            }
</script>